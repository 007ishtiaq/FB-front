(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[60],{704:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),c=a(19),o=a(36),r=a(5);var s=a(705);t.default=()=>{const[e,t]=Object(n.useState)(""),[a,m]=Object(n.useState)(""),[u,i]=Object(n.useState)(""),[p,d]=Object(n.useState)(""),[h,E]=Object(n.useState)(""),[v,g]=Object(n.useState)(""),[b,f]=Object(n.useState)([]),{user:y}=Object(c.c)((e=>({...e})));Object(n.useEffect)((()=>{C()}),[]);const C=()=>(async()=>await r.a.get("".concat("http://localhost:8000/api","/coupons")))().then((e=>f(e.data))),N=e=>{window.confirm("Delete?")&&(g(!0),(async(e,t)=>await r.a.delete("".concat("http://localhost:8000/api","/coupon/").concat(e),{headers:{authtoken:t}}))(e,y.token).then((e=>{C(),g(!1),o.toast.error('Coupon "'.concat(e.data.name,'" deleted'))})).catch((e=>console.log(e))))};return l.a.createElement("div",{className:"col-md-12"},v?l.a.createElement("h4",{className:"text-danger"},"Loading..."):l.a.createElement("h4",null,"Coupon"),l.a.createElement("form",{onSubmit:n=>{n.preventDefault(),g(!0),(async(e,t)=>await r.a.post("".concat("http://localhost:8000/api","/coupon"),{coupon:e},{headers:{authtoken:t}}))({name:e,type:a,condition:u,expiry:p,discount:h},y.token).then((e=>{g(!1),C(),t(""),E(""),d(""),o.toast.success('"'.concat(e.data.name,'" is created'))})).catch((e=>{g(!1),console.log("create coupon err",e),o.toast.error("coupon create failed")}))}},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"text-muted"},"Coupon Code"),l.a.createElement("input",{type:"text",className:"form-control",onChange:e=>t(e.target.value),value:e,autoFocus:!0,required:!0})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Coupon type"),l.a.createElement("select",{name:"type",className:"form-control",onChange:e=>m(e.target.value),value:a},l.a.createElement("option",null,"Please select"),l.a.createElement("option",{value:"Discount"},"Discount %"),l.a.createElement("option",{value:"Cash"},"Cash Off"),l.a.createElement("option",{value:"Shipping"},"Free Shipping"))),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"text-muted"},"Coupon Condition (Min cart value, Flat)"),l.a.createElement("input",{type:"text",className:"form-control",onChange:e=>i(e.target.value),value:u})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"text-muted"},"Coupon Value (%, Rs, 0)"),l.a.createElement("input",{type:"text",className:"form-control",onChange:e=>E(e.target.value),value:h,required:!0})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"text-muted"},"Expiry"),l.a.createElement("br",null),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Set Expiry Time"),l.a.createElement("input",{type:"text",name:"expiry",className:"form-control",value:p,onChange:e=>d(e.target.value)}))),l.a.createElement("button",{className:"btn btn-outline-primary"},"Save")),l.a.createElement("br",null),l.a.createElement("h4",null,b.length," Coupons"),l.a.createElement("table",{className:"table table-bordered"},l.a.createElement("thead",{className:"thead-light"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"Coupon Code"),l.a.createElement("th",{scope:"col"},"Coupon Type"),l.a.createElement("th",{scope:"col"},"Condition (Min , Flat)"),l.a.createElement("th",{scope:"col"},"Coupon Value (%, Rs)"),l.a.createElement("th",{scope:"col"},"Expiry"),l.a.createElement("th",{scope:"col"},"Action"))),l.a.createElement("tbody",null,b.map((e=>l.a.createElement("tr",{key:e._id},l.a.createElement("td",null,e.name),l.a.createElement("td",null,e.type),l.a.createElement("td",null,!e.condition&&"Flat -"," ",e.condition&&"Min ".concat(e.condition)," "),l.a.createElement("td",null,"Cash"===e.type&&"Rs. ",e.discount,"Discount"===e.type&&" %","Shipping"===e.type&&" Shipping"),l.a.createElement("td",null,new Date(e.expiry).toLocaleDateString()),l.a.createElement("td",null,l.a.createElement(s.a,{onClick:()=>N(e._id),className:"text-danger pointer"}))))))))}},705:function(e,t,a){"use strict";var n=a(11),l=a(0),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"},o=a(56),r=function(e,t){return l.createElement(o.a,Object(n.a)(Object(n.a)({},e),{},{ref:t,icon:c}))};r.displayName="DeleteOutlined";t.a=l.forwardRef(r)}}]);
//# sourceMappingURL=60.51554979.chunk.js.map